this.channox=this.channox||{};$(document).ready(function(){});(function(){channox.Settings=function(){this.arrowFill=createjs.Graphics.getRGB(255,153,51,0.5);this.boxStroke=createjs.Graphics.getRGB(255,153,51,1);this.boxFill=createjs.Graphics.getRGB(255,255,255,0.25);this.boardStroke="#934800";this.whiteFill="#f4eec2";this.blackFill="#b16d01";this.pieceFill="#3d2606";this.legendColor="#eeeeee";this.legend=!0}})();(function(){var a=function(c,b){this.initialize();var d=new createjs.Graphics;d.beginStroke("#fff");d.setStrokeStyle(30);a.loadPath(d,c);this.out=d;this.beginLinearGradientFill(["#FFF","#C8C8C8"],[0.5,1],-50,0,50,0);this.beginStroke(createjs.Graphics.getRGB(255,255,255,0.5));this.setStrokeStyle(10);a.loadPath(this,c);this.beginFill("#333");this.setStrokeStyle(1);a.loadPath(this,b);this.outline=c};a.prototype=new createjs.Graphics;a.loadPath=function(a,b){for(var d=b.length,i=0;i<d;i++)a.decodePath(b[i]),
a.closePath()};channox.Figure=a})();(function(){var a=function(a){this.font=a};a.fonts={};a.getChessSet=function(c){return a.fonts[c?c:"default"]};a.register=function(c,b){a.fonts[c]=new channox.ChessSet(b)};a.prototype.getFigure=function(a){return this.font[a]};channox.ChessSet=a})();(function(){var a=function(b,d){void 0===d&&((d=+$(b).attr("data-size"))||(d=30));this.parent=$(b);var a=this.element=$("<canvas>");a.addClass("channox-board");a[0].channox=this;$(b).empty().append(a);this.settings=new channox.Settings;this.stage=new createjs.Stage(a[0]);this.fen=channox.FEN.BEGIN;this.highlights=Array(64);this.size=d;this.flip=!1;this.cursor=null;var c=this;this.ticker=function(){c.dirty&&(c.stage.update(),c.dirty=!1)};createjs.Ticker.addListener(this.ticker);a.mouseout(function(){c.cursor&&
(c.cursor.visible=!1,c.dirty=!0);c.listener&&c.listener("out")});var e=function(b){var d=a.offset(),e=b.pageX-d.left,b=b.pageY-d.top;if(void 0!==c.promo)c.promo.mousemove(e,b);else if(c.cursor&&(d=0.9*c.size/200,c.cursor.alpha=0.7,c.cursor.setTransform(e,b,d,d),c.cursor.visible=!0,c.dirty=!0),c.listener){var e=e-c.offsetX,b=b-c.offsetY,e=Math.floor(e/c.size),b=Math.floor(b/c.size),h;0<=e&&(8>e&&0<=b&&8>b)&&(h=8*b+e,c.flip&&(h=63-h));c.listener("move",h)}return!0},h=function(b,d){var e=a.offset(),
h=b.pageX-e.left,e=b.pageY-e.top;if(void 0!==c.promo)c.promo.click(h,e)&&(c.promo.dispose(),c.promo=void 0);else if(h-=c.offsetX,e-=c.offsetY,h=Math.floor(h/c.size),e=Math.floor(e/c.size),8==e&&-1==h)c.swap&&d&&c.swap();else{var l;0<=h&&(8>h&&0<=e&&8>e)&&(l=8*e+h,c.flip&&(l=63-l));c.listener&&c.listener(d?"down":"up",l)}};a.mousemove(e);a.mousedown(function(b){h(b,!0)});a.mouseup(function(b){h(b,!1)});a.bind("touchmove",function(b){e(b.originalEvent)});this.layout()},c=a.prototype;c.dispose=function(){createjs.Ticker.removeListener(me.ticker)};
c.setFlip=function(b){this.flip=b;this.update()};c.getFlip=function(){return this.flip};c.setCursor=function(b){b?(this.cursor=new createjs.Shape(channox.ChessSet.getChessSet().getFigure(b)),this.cursor.visible=!1):this.cursor=null;this.update()};c.getFEN=function(){return this.fen};c.setFEN=function(b){this.fen=b;this.arrow=null;this.highlights=Array(64);this.update()};c.setPly=function(b){this.fen=b.getAfter();var d=b.getMove();d?(b=d.getFrom(),d=d.getTo(),this.arrow=new createjs.Shape(new channox.Arrow(this.rx(b)+
0.5,this.ry(b)+0.5,this.rx(d)+0.5,this.ry(d)+0.5,this.settings)),this.arrow.setTransform(this.offsetX,this.offsetY,this.size,this.size)):this.arrow=void 0;this.highlights=Array(64);this.update()};c.rx=function(b){this.flip&&(b=63-b);return b%8};c.ry=function(b){this.flip&&(b=63-b);return Math.floor(b/8)};c.x=function(b){return this.offsetX+this.rx(b)*this.size+this.size/2};c.y=function(b){return this.offsetY+this.ry(b)*this.size+this.size/2};c.legend=function(){var b=new createjs.Graphics,d=this.size,
a=d/3,c=d/3,e=d/20;b.beginStroke(this.settings.boardStroke);b.beginFill(this.settings.boardStroke);b.setStrokeStyle(d/10);b.drawRect(-e-a,-e,a,8*d+c+2*e);b.drawRect(-e,8*d+e,8*d+2*e,c);b.endStroke();b.beginFill(this.getTurnColor(this.fen.isWhiteToPlay()));b.arc(-a/2-e,8*d+e+c/2,a/3,0,2*Math.PI);var h=new createjs.Container;h.setTransform(this.offsetX,this.offsetY);h.addChild(new createjs.Shape(b));for(var b="bold "+Math.floor(7*d/24)+"px Arial",g=0;8>g;g++){var j=new createjs.Text(this.flip?g+1:8-
g,b,this.settings.legendColor);j.textAlign="center";j.textBaseline="middle";j.x=-a/2-e;j.y=d*g+d/2;h.addChild(j);j=new createjs.Text(String.fromCharCode(97+(this.flip?7-g:g)),b,this.settings.legendColor);j.textAlign="center";j.textBaseline="middle";j.x=d*g+d/2;j.y=8*d+c/2+e;h.addChild(j)}return h};c.backgroundImage=function(){var b=new createjs.Bitmap("channox/images/80.png");b.setTransform(this.offsetX,this.offsetY,this.size/80,this.size/80);return b};c.backgroundSolid=function(){var b=new createjs.Graphics,
d=this.size;b.beginFill(this.settings.whiteFill);for(var a=0;8>a;a++)for(var c=a%2;8>c;c+=2)b.drawRect(c*d,a*d,d,d);b.beginFill(this.settings.blackFill);for(a=0;8>a;a++)for(c=1-a%2;8>c;c+=2)b.drawRect(c*d,a*d,d,d);b.endFill();b.beginStroke(this.settings.boardStroke);b.setStrokeStyle(d/10);b.drawRect(-d/20,-d/20,8.1*d,8.1*d);b=new createjs.Shape(b);b.setTransform(this.offsetX,this.offsetY);return b};c.background=function(){return this.backgroundSolid()};c.layout=function(){this.element.attr("width",
this.parent.innerWidth());this.element.attr("height",this.parent.innerHeight());this.update()};c.update=function(){var b=0,d=0;this.settings.legend&&(d=this.element.height()/3/8,b=this.element.width()/3/8);var a=Math.min(this.element.width()-b,this.element.height()-d);this.size=a=Math.floor(5*a/41);var c=channox.ChessSet.getChessSet(),e=0.9*a/200,h=8*this.size+this.size/5,g=this.element.width()-h-b,d=this.element.height()-h-d;this.offsetX=Math.floor(g/2+a/10)+b;this.offsetY=Math.floor(d/2+a/10);this.stage.removeAllChildren();
this.stage.addChild(this.background());this.settings.legend&&this.stage.addChild(this.legend());for(b=0;64>b;b++)if(d=this.fen.getPiece(b))d=c.getFigure(d.getFEN()),d=new createjs.Shape(d),d.setTransform(this.x(b),this.y(b),e,e),this.stage.addChild(d);this.arrow&&(this.arrow.setTransform(this.offsetX,this.offsetY,a,a),this.stage.addChild(this.arrow));this.cursor&&this.stage.addChild(this.cursor);this.dirty=!0};c.getTurnColor=function(b){return b?"#fff":"#000"};c.setArrow=function(b,d){this.clearArrow();
this.x(b);this.y(b);var a=new channox.Arrow(this.rx(b)+0.5,this.ry(b)+0.5,this.rx(d)+0.5,this.ry(d)+0.5,this.settings);this.arrow=new createjs.Shape(a);this.arrow.setTransform(this.offsetX+this.size/2,this.offsetY+this.size/2,this.size,this.size);this.stage.addChild(arrow);this.dirty=!0};c.clearArrow=function(){this.arrow&&this.stage.removeChild(this.arrow)};c.onClick=function(b){this.listener=b};c.onSwap=function(b){this.swap=b};c.isHighlight=function(b){return void 0!==this.highlights[b]};c.clearHighlight=
function(b){var d=this.highlights[b];void 0!==d&&(this.stage.removeChild(d),this.highlights[b]=void 0,this.dirty=!0)};c.clearHighlights=function(){for(var b=0;64>b;b++)this.highlights[b]&&this.stage.removeChild(this.highlights[b]);this.highlights=Array(64);this.dirty=!0};c.setHighlight=function(b){if(void 0===this.highlights[b]){var d=new channox.Box(this.rx(b),this.ry(b),this.settings),d=new createjs.Shape(d);d.setTransform(this.offsetX,this.offsetY,this.size,this.size);this.stage.addChildAt(d,this.settings.legend?
2:1);this.highlights[b]=d;this.dirty=!0}};c.setHighlights=function(b){for(var d=0;64>d;d++)this.highlights[d]&&this.stage.removeChild(this.highlights[d]);this.highlights=Array(64);for(var a=b.length,d=0;d<a;d++){var c=b[d],e=new channox.Box(this.rx(c),this.ry(c),this.settings),e=new createjs.Shape(e);e.setTransform(this.offsetX,this.offsetY,this.size,this.size);this.stage.addChildAt(e,this.settings.legend?2:1);this.highlights[c]=e}this.dirty=!0};c.promotion=function(b,d){void 0!==this.promo&&this.promo.dispose();
this.promo=new channox.Promotion(this,b,d)};channox.Board=a})();(function(){var a=function(b,d,a){this.board=b;this.move=d;this.callback=a;this.areas=[];this.offsetX=4*b.size+b.offsetX;this.offsetY=4*b.size+b.offsetY;this.fens=null==d||d.isWhite()?"QRNB":"qrnb";new createjs.Graphics;var d=channox.ChessSet.getChessSet(),c=1.5*b.size,a=c/200;this.size=0.9*c;this.panel=new createjs.Container;this.panel.setTransform(this.offsetX,this.offsetY);b.stage.addChild(this.panel);var e=new createjs.Graphics;e.beginFill(createjs.Graphics.getRGB(0,0,0,0.6));e.beginStroke(createjs.Graphics.getRGB(128,
128,128,0.6));e.setStrokeStyle(c/20);e.drawRoundRect(-2*c,-c/2,4*c,c,c/5);this.panel.addChild(new createjs.Shape(e));for(c=0;4>c;c++)e=this.fens.charAt(c),e=d.getFigure(e),e=new createjs.Shape(e),e.scaleX=e.scaleY=0.8*a,e.x=(2*c-3)*this.size/2,e.y=0,this.panel.addChild(e),this.areas.push(e);b.stage.update()},c=a.prototype;c.dispose=function(){this.board.stage.removeChild(this.panel);this.board.stage.update();this.callback(null)};c.click=function(b,d){b-=this.offsetX;d-=this.offsetY;b/=this.size;d/=
this.size;b+=2;d+=0.5;if(0>b||4<=b||0>d||1<=d)return!0;this.callback(this.move.setPiece(channox.Piece[this.fens.charAt(Math.floor(b))]));return!0};c.mousemove=function(b,d){var b=b-this.offsetX,d=d-this.offsetY,b=b/this.size,d=d/this.size,b=b+2,d=d+0.5,a=void 0;0<=b&&(4>b&&0<=d&&1>d)&&(a=this.areas[Math.floor(b)]);this.current!==a&&(void 0!==this.current&&(this.current.shadow=null),this.current=a,void 0!==a&&(a.shadow=new createjs.Shadow(createjs.Graphics.getRGB(255,255,255,0.75),0,0,0.7*this.size)),
this.board.stage.update())};channox.Promotion=a})();(function(){var a=function(b){void 0===b&&(b=a.BEGIN);if(b instanceof a){for(var d in b)this[d]=b[d];this.castle=b.castle.slice(0)}else{d=b.split(" ");for(var b=d[0].replace(/\//g,""),c=1;8>=c;c++)var f="........".substring(0,c),b=b.replace(RegExp(c,"g"),f);this.board=b;this.white="w"==d[1];this.castle=Array(4);b=d[2].length;for(c=0;c<b;c++)switch(d[2].charAt(c)){case "K":this.castle[0]=63;break;case "Q":this.castle[1]=56;break;case "k":this.castle[2]=7;break;case "q":this.castle[3]=0}this.ep="-"==
d[3]?void 0:channox.SAN.parseSquare(d[3]);this.hnr=d[4];this.nr=d[5]}},c=a.prototype;c.isAttacked=function(b,d){var a=[];if(void 0===b)return a;for(var c=this.getPiece(b),e=0;8>e;e++){var h=channox.Direction.JUMP[e],g=h.follow(b);void 0!==g&&(c=this.getPiece(g),void 0!==c&&(c.isWhite()==d&&c.isKnight())&&a.push(g))}for(e=0;4>e;e++)if(h=channox.Direction.HORIZONTAL[e],g=h.follow(b),void 0!==g){c=this.getPiece(g);for(void 0!==c&&(c.isWhite()==d&&c.isKing())&&a.push(g);;){if(void 0!==c){c.isWhite()==
d&&(c.isQueen()||c.isRook())&&a.push(g);break}g=h.follow(g);if(void 0===g)break;c=this.getPiece(g)}}for(e=0;4>e;e++)if(h=channox.Direction.DIAGONAL[e],g=h.follow(b),void 0!==g){c=this.getPiece(g);for(void 0!==c&&c.isWhite()==d&&(c.isKing()||h.pawn===c)&&a.push(g);;){if(void 0!==c){c.isWhite()==d&&(c.isQueen()||c.isBisshop())&&a.push(g);break}g=h.follow(g);if(void 0===g)break;c=this.getPiece(g)}}return a};c.getNr=function(){return this.nr};c.getBoard=function(){return this.board};c.getKing=function(b){b=
this.board.indexOf(b?"K":"k");return 0>b?void 0:b};c.toString=function(){for(var b=Array(8),a=0;8>a;a++){for(var c=this.board.substring(8*a,8*a+8),f=8;2<f;f--)var e="\\.\\.\\.\\.\\.\\.\\.\\.".substring(0,2*f),c=c.replace(RegExp(e,"g"),f);b[a]=c}b=b.join("/")+" "+(this.white?"w":"b")+" ";a=b.length;b+=void 0===this.castle[0]?"":"K";b+=void 0===this.castle[1]?"":"Q";b+=void 0===this.castle[2]?"":"k";b+=void 0===this.castle[3]?"":"q";b=a==b.length?b+"- ":b+" ";b=void 0===this.ep?b+"-":b+channox.SAN.square(this.ep);
return b+=" "+this.hnr+" "+this.nr};c.getPiece=function(b){b=this.board.charAt(b);return"."==b?void 0:channox.Piece[b]};c.setPiece=function(b,a){var c=this.board.substring(0,b),c=c+(a?a.getFEN():".");this.board=c+=this.board.substring(b+1)};c.isWhiteToPlay=function(){return this.white};c.setWhiteToPlay=function(b){this.white=b};c.clearCastle=function(b){for(var a=b?2:4,b=b?0:2;b<a;b++)this.castle[b]=void 0};c.clearCastleSquare=function(b){for(var a=0;4>a;a++)this.castle[a]==b&&(this.castle[a]=void 0)};
c.setEnPassant=function(b){this.ep=b};a.BEGIN=new a("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");a.CLEAR=new a("8/8/8/8/8/8/8/8 w KQkq - 0 1");channox.FEN=a})();(function(){var a=function(){};a.rank=function(a){return 8-Math.floor(a/8)};a.file=function(a){return String.fromCharCode(97+a%8)};a.square=function(c){return a.file(c)+a.rank(c)};a.parseSquare=function(a){var b=a.charCodeAt(0)-97;return 8*(8-(a.charCodeAt(1)-48))+b};a.unique=function(c,b){for(var d=c.getPiece(),i=Math.floor(c.getFrom()/8),f=c.getFrom()%8,e=!1,h=!1,g=0,j=d.directions.length,k=0;k<j;k++)for(var m=d.directions[k],l=m.follow(c.getTo());void 0!==l;){var n=b.getPiece(l);if(void 0!==n){n===
d&&(m=l%8,Math.floor(l/8)!=i&&(e=!0),m!=f&&(h=!0),g++);break}if(!d.repeat)break;l=m.follow(l)}if(1>=g)return"";d=h?a.file(c.getFrom()):"";!h&&e&&(d+=a.rank(c.getFrom()));return d};a.toString=function(c,b){if(void 0===c)return b.getPiece().getSAN()+a.square(b.getFrom())+"-"+a.square(b.getTo());if(b.isCastle())return b.getTarget()>b.getFrom()?"O-O":"O-O-O";if(b.getPiece().isPawn()||b.isPromotion()){var d;d=b.isCapture()?a.file(b.getFrom())+"x"+a.square(b.getTo()):a.square(b.getTo());return b.isPromotion()?
d+"="+b.getPiece().getSAN():d}return b.getPiece().getSAN()+a.unique(b,c)+(this.capture?"x":"")+a.square(b.getTo())};a.parse=function(a,b){var d=b.match(/^([KQNBR])?([a-h])?([1-8])?(x)?([a-h][1-8])(=[QRBN])?(.*)$/);if(!d){var i=a.isWhiteToPlay()?0:2,f,e;switch(b){case "O-O":f=a.castle[i];e=1;break;case "O-O-O":f=a.castle[i+1],e=-1}if(!f)throw"Castling not possible in: "+a;d=a.getKing(a.isWhiteToPlay());if(void 0===d)throw"Board without "+(white?"white":"black")+" king";return channox.Move.castle(a.isWhiteToPlay()?
channox.Piece.WHITEKING:channox.Piece.BLACKKING,d,d+2*e,f,d+e)}f=(f=d[1])?channox.Piece[a.isWhiteToPlay()?f:f.toLowerCase()]:channox.Piece[a.isWhiteToPlay()?"P":"p"];var h=channox.SAN.parseSquare(d[5]);if(f.isPawn()){e=f.direction.reverse;var g=e.follow(h);if(d[4])e=d[2].charCodeAt(0)-97<h%8,i=void 0===a.getPiece(h)?channox.Move.enpassent(f,e?g-1:g+1,h,g):channox.Move.capture(f,e?g-1:g+1,h);else{if(a.getPiece(g)===f)i=channox.Move.move(f,g,h);else if(g=e.follow(g),Math.floor(g/8)==f.start&&a.getPiece(g)===
f)i=channox.Move.firstmove(f,g,h);else throw"Not a valid pawn move: "+i+" in "+a;d[6]&&(f=d[6].charAt(1),i.piece=channox.Piece[a.isWhiteToPlay()?f:f.toLowerCase()])}i.comment=d[7];return i}var j=f.directions.length,k,m;void 0!==d[2]&&(k=d[2].charCodeAt(0)-97);void 0!==d[3]&&(m=8-(d[3].charCodeAt(0)-49));for(i=0;i<j;i++){e=f.directions[i];for(g=e.follow(h);void 0!==g;){if((void 0===m||m==Math.floor(g/8))&&(void 0===k||k==g%8)&&a.getPiece(g)===f)return d[3]?channox.Move.move(f,g,h):channox.Move.capture(f,
g,h);if(f.repeat)g=e.follow(g);else break}}throw"No can do: "+b;};channox.SAN=a})();(function(){var a=function(a,b,d,i,f){this.initialize();var e=Math.sqrt(Math.pow(a-d,2)+Math.pow(b-i,2)),h=1/7,g=h/0.3,d=(d-a)/e,i=(i-b)/e,j=h/2,e=e-g-1/6,h=(g-h)/2,k=g/2;this.beginFill(f.arrowFill);this.moveTo(a,b);this.lineTo(a+=-i*j,b+=d*j);this.lineTo(a+=d*e,b+=i*e);this.lineTo(a+=-i*h,b+=d*h);this.lineTo(a+=d*g+i*k,b+=i*g-d*k);this.lineTo(a+=-d*g+i*k,b+=-i*g-d*k);this.lineTo(a+=-i*h,b+=d*h);this.lineTo(a+-d*e,b+-i*e);this.closePath()};a.prototype=new createjs.Graphics;channox.Arrow=a})();(function(){var a=function(a,b,d){this.initialize();this.beginStroke(d.boxStroke);this.setStrokeStyle(1/12,0,1);this.beginFill(d.boxFill);this.drawRoundRect(a,b,1,1,0.1)};a.prototype=new createjs.Graphics;channox.Box=a})();(function(){var a=function(b,a){this.dy=b;this.dx=a;this.forward=[];for(var c=0;8>c;c++)for(var f=0;8>f;f++){var e=c+b,h=f+a,g=8*c+f,j=void 0;8>e&&(0<=e&&8>h&&0<=h)&&(j=8*e+h);this.forward[g]=j}},c=a.prototype;c.follow=function(b){return this.forward[b]};c.opposite=function(){return this.reverse};a.N=new a(-1,0);a.E=new a(0,1);a.S=new a(1,0);a.W=new a(0,-1);a.NE=new a(-1,1);a.SE=new a(1,1);a.SW=new a(1,-1);a.NW=new a(-1,-1);a.NNE=new a(-2,1);a.NEE=new a(-1,2);a.SEE=new a(1,2);a.SSE=new a(2,1);a.SSW=
new a(2,-1);a.SWW=new a(1,-2);a.NWW=new a(-1,-2);a.NNW=new a(-2,-1);a.N.reverse=a.S;a.E.reverse=a.W;a.S.reverse=a.N;a.W.reverse=a.E;a.NE.reverse=a.SW;a.SE.reverse=a.NW;a.SW.reverse=a.NE;a.NW.reverse=a.SE;a.NNE.reverse=a.SSW;a.NEE.reverse=a.SWW;a.SEE.reverse=a.NWW;a.SSE.reverse=a.NNW;a.SSW.reverse=a.NNE;a.SWW.reverse=a.NEE;a.NWW.reverse=a.SEE;a.NNW.reverse=a.SSE;a.HORIZONTAL=[a.N,a.E,a.S,a.W];a.DIAGONAL=[a.NE,a.SE,a.SW,a.NW];a.ALL=[a.N,a.NE,a.E,a.SE,a.S,a.SW,a.W,a.NW];a.JUMP=[a.NNE,a.NEE,a.SEE,a.SSE,
a.SSW,a.SWW,a.NWW,a.NNW];channox.Direction=a})();(function(){var a=function(){},c=a.prototype;c.promotionRank=function(){};c.getFEN=function(){return this.fen};c.moves=function(){};c.isWhite=function(){return!0==this.white};c.isPawn=function(){return!0==this.pawn};c.isRook=function(){return!0==this.rook};c.isKing=function(){return!0==this.king};c.isQueen=function(){return!0==this.queen};c.isKnight=function(){return!0==this.knight};c.isBisshop=function(){return!0==this.bisshop};channox.Piece=a})();(function(){var a=function(b,d){void 0===d&&((d=+$(b).attr("data-size"))||(d=30));this.parent=$(b);var c=this.element=$("<canvas>");c.addClass("channox-pieces");c[0].channox=this;$(b).empty().append(c);this.settings=new channox.Settings;this.stage=new createjs.Stage(c[0]);this.highlights=Array(12);this.size=d;var f=this;c.mousemove(function(b){if(void 0!==f.promo){var a=c.offset();f.promo.mousemove(b.pageX-a.left,b.pageY-a.top)}});c.click(function(b){var d=c.offset(),g=b.pageX-d.left,b=b.pageY-d.top,
g=g-f.offsetX,b=b-f.offsetY;if(0>g||0>b)return!1;g=Math.floor(g/f.size);b=Math.floor(b/f.size);if(2<=g||6<=b)return!1;f.listener&&(g=2*b+g,f.listener(g,a.FENS.charAt(g)));return!0});this.layout()};a.FENS="KkQqBbNnRrPp";var c=a.prototype;c.rx=function(b){return b%2};c.ry=function(b){return Math.floor(b/2)};c.x=function(b){return this.offsetX+this.rx(b)*this.size+this.size/2};c.y=function(b){return this.offsetY+this.ry(b)*this.size+this.size/2};c.layout=function(){this.element.attr("width",this.parent.innerWidth());
this.element.attr("height",this.parent.innerHeight());this.update()};c.update=function(){var b=Math.min(5*this.element.width()/11,5*this.element.height()/31);this.size=b=Math.floor(b);var c=channox.ChessSet.getChessSet(),i=0.85*b/200,f=2*this.size+this.size/5,e=6*this.size+this.size/5,f=this.element.width()-f,e=this.element.height()-e;this.offsetX=Math.floor(f/2+b/10);this.offsetY=Math.floor(e/2+b/10);this.stage.removeAllChildren();for(b=0;12>b;b++)e=a.FENS.charAt(b),e=c.getFigure(e),e=new createjs.Shape(e),
e.setTransform(this.x(b),this.y(b),i,i),this.stage.addChild(e);this.stage.update()};c.onClick=function(b){this.listener=b};c.isHighlight=function(b){return void 0!==this.highlights[b]};c.clearHighlight=function(b){var a=this.highlights[b];void 0!==a&&(this.stage.removeChild(a),this.highlights[b]=void 0);this.stage.update()};c.clearHighlights=function(){for(var b=0;64>b;b++)this.highlights[b]&&this.stage.removeChild(this.highlights[b]);this.highlights=Array(12);this.stage.update()};c.setHighlight=
function(b){this.clearHighlight(b);var a=new channox.Box(this.rx(b),this.ry(b),this.settings),a=new createjs.Shape(a);a.setTransform(this.offsetX,this.offsetY,this.size,this.size);this.stage.addChildAt(a,0);this.highlights[b]=a;this.stage.update()};channox.Pieces=a})();(function(){var a=function(b,a,c,f,e){this.fen=b;this.white="A"<=b&&"Z">=b;this.start=a;this.promo=c;this.ep=f;this.direction=e;this.pawn=!0;channox.Piece[b]=this},c=a.prototype=new channox.Piece;c.getSAN=function(){return""};c.promotionRank=function(){return this.promo};c.enpassant=function(b,a,c,f){c=c.follow(a);if(void 0!==c){var e=b.getPiece(c);void 0!==e&&(e.isPawn()&&this.white!=e.white)&&(e=this.direction.follow(c),b.getPiece(e)||f(channox.Move.enpassant(this,a,e,c)))}};c.capture=function(b,
a,c,f,e){c=f.follow(c);void 0!==c&&(b=b.getPiece(c),void 0!==b&&(this.white!=b.white&&!b.isKing())&&e(channox.Move.capture(this,a,c)))};c.moves=function(b,a,c){var f=Math.floor(a/8);f==this.ep&&(this.enpassant(b,a,channox.Direction.W,c),this.enpassant(b,a,channox.Direction.E,c));var e=this.direction.follow(a);if(void 0!==e){var h=void 0===b.getPiece(e);h&&c(channox.Move.move(this,a,e));this.capture(b,a,e,channox.Direction.W,c);this.capture(b,a,e,channox.Direction.E,c);f==this.start&&h&&(e=this.direction.follow(e),
void 0===b.getPiece(e)&&c(channox.Move.firstmove(this,a,e)))}};channox.Direction.SW.pawn=channox.Direction.SE.pawn=channox.Piece.WHITEPAWN=new a("P",6,0,3,channox.Direction.N);channox.Direction.NW.pawn=channox.Direction.NE.pawn=channox.Piece.BLACKPAWN=new a("p",1,7,4,channox.Direction.S);channox.Pawn=a})();(function(){var a=function(b,a){this.fen=b;this.san=b.toUpperCase();this.white="A"<=b&&"Z">=b;this.directions=a;channox.Piece[b]=this;switch(b){case "k":case "K":this.repeat=!1;this.king=!0;break;case "q":case "Q":this.queen=this.repeat=!0;break;case "r":case "R":this.rook=this.repeat=!0;break;case "b":case "B":this.bisshop=this.repeat=!0;break;case "n":case "N":this.repeat=!1,this.knight=!0}},c=a.prototype=new channox.Piece;c.getSAN=function(){return this.san};c.castle=function(b,a,c,f){if(a!=c){for(var e=
a<c?1:-1,h=a+e;h!=c;h+=e)if(void 0!==b.getPiece(h))return;b=b.getPiece(c);void 0!==b&&(b.isRook()&&b.isWhite()==this.white)&&f(channox.Move.castle(this,a,a+2*e,c,a+e))}};c.moves=function(b,a,c){for(var f=this.directions.length,e=0;e<f;e++)for(var h=this.directions[e],g=h.follow(a);void 0!==g;){var j=b.getPiece(g);if(void 0===j)c(channox.Move.move(this,a,g));else{j.white!=this.white&&c(channox.Move.capture(this,a,g));break}if(!this.repeat)break;g=h.follow(g)}this.king&&(f=this.white?0:2,void 0!==b.castle[f]&&
this.castle(b,a,b.castle[f],c),f++,void 0!==b.castle[f]&&this.castle(b,a,b.castle[f],c))};channox.Piece.WHITEKING=new a("K",channox.Direction.ALL);channox.Piece.BLACKKING=new a("k",channox.Direction.ALL);channox.Piece.WHITEQUEEN=new a("Q",channox.Direction.ALL);channox.Piece.BLACKQUEEN=new a("q",channox.Direction.ALL);channox.Piece.WHITEBISSHOP=new a("B",channox.Direction.DIAGONAL);channox.Piece.BLACKBISSHOP=new a("b",channox.Direction.DIAGONAL);channox.Piece.WHITEROOK=new a("R",channox.Direction.HORIZONTAL);
channox.Piece.BLACKROOK=new a("r",channox.Direction.HORIZONTAL);channox.Piece.WHITEKNIGHT=new a("N",channox.Direction.JUMP);channox.Piece.BLACKKNIGHT=new a("n",channox.Direction.JUMP);channox.MajorPiece=a})();(function(){var a=function(b,a,c){try{this.piece=b;this.from=a;this.to=this.target=c;var f=Math.floor(c/8);this.promotion=b.promotionRank()==f}catch(e){}};a.move=function(b,c,i){return new a(b,c,i)};a.capture=function(b,c,i){b=new a(b,c,i);b.capture=!0;return b};a.firstmove=function(b,c,i){b=new a(b,c,i);b.enpassant=(c+i)/2;return b};a.enpassant=function(b,c,i,f){c=new a(b,c,i);c.piece2=b.white?channox.Piece.BLACKPAWN:channox.Piece.WHITEPAWN;c.from2=f;c.capture=!0;c.enpassant=i;return c};a.castle=
function(b,c,i,f,e){c=new a(b,c,i);c.from2=c.target=f;c.to2=e;c.piece2=b.isWhite()?channox.Piece.WHITEROOK:channox.Piece.BLACKROOK;return c};a.moves=function(b,c){for(var i=0;64>i;i++)a.moveFrom(b,i,c)};a.moveFrom=function(b,a,c){var f=b.getPiece(a);void 0!==f&&f.moves(b,a,c)};var c=a.prototype;c.apply=function(b){b=new channox.FEN(b);this.capture||this.promotion||this.piece instanceof channox.Pawn?b.hnr=0:b.hnr++;b.nr++;b.setPiece(this.from);b.setPiece(this.to,this.piece);b.setWhiteToPlay(!this.piece.isWhite());
if(void 0!==this.from2){var a=b.getPiece(this.from2);b.setPiece(this.from2);void 0!==this.to2&&b.setPiece(this.to2,a)}void 0===this.capture&&b.setEnPassant(this.enpassant);this.piece.isKing()?b.clearCastle(this.piece.isWhite()):this.piece.isRook()&&b.clearCastleSquare(this.from);return b};c.getPiece=function(){return this.piece};c.setPiece=function(b){var c=new a(this.piece,this.from,this.to);c.capture=this.capture;c.piece=b;return c};c.isMoveSquare=function(b){return b==this.from||b==this.to||b==
this.from2||sqaure==this.to2};c.isCapture=function(){return!0==this.capture};c.isPromotion=function(){return!0==this.promotion};c.isEnPassant=function(){return void 0!==this.enpassant};c.isCastle=function(){return void 0!==this.to2};c.isTurn=function(b){return b.isWhiteToPlay()==this.piece.isWhite()};c.isLegal=function(b){var a=this.piece.isWhite();if(void 0!==this.capture&&void 0!==this.enpassant&&this.enpassant!=b.ep)return!1;var c=b.getPiece(this.to),b=this.apply(b);if(this.isCastle())for(var c=
this.from<this.to?1:-1,f=this.from;;){if(0<b.isAttacked(f,!a).length)return!1;if(f==this.to)return!0;f+=c}else return void 0!==c&&c.isKing()?!1:0==b.isAttacked(b.getKing(a),!a).length};c.isWhite=function(){return this.piece.isWhite()};c.getTarget=function(){return this.target};c.getTo=function(){return this.to};c.getFrom=function(){return this.from};c.toString=function(){return channox.SAN.toString(null,this)};channox.Move=a})();(function(){var a=function(b){void 0===b&&(b=channox.FEN.BEGIN);this.plies=[];this.plies.push(new channox.Ply(b))},c=a.prototype;c.setResult=function(b){this.result=b};c.getResult=function(){return this.result};c.addMove=function(b){return this.setMove(this.plies[this.plies.length-1].getAfter(),b)};c.addComment=function(b){this.plies[this.plies.length-1].getMove().comment=b};c.setMove=function(b,a){var c=b.getNr(),f=this.plies.length,e;if(this.plies[c-1].getAfter().getBoard()==b.getBoard()){e=ply=
this.plies[c]=new channox.Ply(b,a);for(c++;c<f;c++){var a=void 0,b=ply.getAfter(),h=this.plies[c].getMove(),g=!1;channox.Move.moves(b,function(b){if(b.getTarget()==h.getTarget()){if(b.isPromotion())if(h.isPromotion())b.setPiece(h.getPiece());else return;else if(h.getPiece()!=b.getPiece())return;b.isTurn(ply.getAfter())&&b.isLegal(ply.getAfter())&&(a=b,a.getFrom()==h.getFrom()&&(g=!0))}});if(!g&&void 0===a){this.plies.splice(c,f-c);break}ply=this.plies[c]=new channox.Ply(b,a)}}else throw"Does not match this game";
return e};c.getPlies=function(){return this.plies};channox.Game=a})();(function(){var a=function(b,a){this.fenBefore=b;this.move=a;this.fenAfter=void 0===a?b:a.apply(b)},c=a.prototype;c.getBefore=function(){return this.fenBefore};c.getAfter=function(){return this.fenAfter};c.getMove=function(){return this.move};c.toString=function(){return void 0===this.move?"BEGIN":channox.SAN.toString(this.getBefore(),this.move)};channox.Ply=a})();(function(){var a=function(b,a){this.board=b;this.element=a;a.attr("tabindex","0");a[0].channox=this;var c=this;a.keyup(function(b){switch(b.keyCode){case 39:c.advanceFocus(1);break;case 37:c.advanceFocus(-1);break;case 36:c.setFocus(0);break;case 35:c.setFocus(-1);break;default:return!1}return!0})},c=a.prototype;c.update=function(b,a){void 0===b?(b=this.game,a=this.focus):(this.game=b,void 0===a&&(a=b.getPlies().length-1),this.focus=a);var c=this;this.spans=[];var f=this.element,e=this.game.getPlies(),
h=e.length;f.empty();for(var g=0;g<h;g++){0<g&&(f.append(1==g%2?" ":"&nbsp;"),1==g%2&&f.append($("<span>").append((g+1)/2).append(".&nbsp;").addClass("channox-nr")));var j=e[g],k=$("<span>").text(j.toString());this.spans.push(k);f.append(k);if(0<g&&(j=j.getMove().comment))f.append(" "),f.append($("<span>").text(j).addClass("channox-comment"));(function(b){k.click(function(){c.setFocus(b)})})(g);g==a&&this.setFocus(g)}if(e=this.game.getResult())f.append(" "),f.append($("<span>").text(e).addClass("channox-result"))};
c.setFocus=function(b){var a=this.game.getPlies().length;if(0>b||b>=a)b=a-1;0>b&&(b=0);a=this.game.getPlies()[b];this.board.setPly(a);void 0!==this.span&&this.span.removeClass("channox-current");a=this.spans[b];a.addClass("channox-current");this.span=a;this.focus=b};c.getFocus=function(){return this.focus};c.advanceFocus=function(b){b=this.focus+b;0>b&&(b=0);this.setFocus(b)};channox.MoveList=a})();(function(){var a=function(b,a,c){this.board=b;this.movelist=a;this.game=void 0===c?new channox.Game:c;this.moves=null;a.update(c);var f=this;b.onClick(function(b){f.onClick(b)})},c=a.prototype;c.onClick=function(b){var a=null,c=this;if(null!=this.moves){for(var f=this.moves.length,e=0,h=0;h<f;h++){var g=this.moves[h];if(g.getFrom()==b||g.getTarget()==b)e++,a=g}1!=e&&(a=void 0)}if(!a){this.moves=[];var j=this.board.getFEN();this.board.clearHighlights();channox.Move.moves(j,function(a){a.isTurn(j)&&
a.isLegal(j)&&(a.getTarget()==b?(c.board.setHighlight(a.getFrom()),c.moves.push(a)):a.getFrom()==b&&(c.board.setHighlight(a.getTarget()),c.moves.push(a)))});if(1==this.moves.length)a=this.moves[0];else return}this.moves=null;a.isPromotion()?this.board.promotion(a,function(b){b&&c.update(b)}):c.update(a)};c.update=function(b){b=this.movelist.game.setMove(this.board.getFEN(),b);this.movelist.update(this.movelist.game,b.getBefore().getNr())};channox.Editor=a})();(function(){var a=function(){this.tags={}};a.prototype.setTag=function(a,b){this.tags[a]=b};a.prototype.getTags=function(){return this.tags};a.prototype.setGame=function(a){this.game=a};a.prototype.getGame=function(){return this.game};a.string=function(a,b,d){for(var i="",f=a.length,e=!1;b<f;b++){var h=a.charAt(b);if(e)i+=h;else if("\\"==h)e=1;else{if('"'==h)return d(i),b;i+=h}}return f};a.Parser=function(a){this.text=a;this.i=this.s=0;this.l=a.length;this.nl=!1};a.newLine=function(){};a.newLine.prototype.pgn=
function(){return"\n"};a.newLine.prototype.toString=function(){return"\n"};a.startTag=function(){};a.startTag.prototype.pgn=function(){return"["};a.endTag=function(){};a.endTag.prototype.pgn=function(){return"]"};a.lineComment=function(a){this.text=a};a.lineComment.prototype.pgn=function(){return";"+this.text};a.startComment=function(){};a.startComment.prototype.pgn=function(){return"{"};a.endComment=function(){};a.endComment.prototype.pgn=function(){return"}"};a.startVariation=function(){};a.startVariation.prototype.pgn=
function(){return"("};a.endVariation=function(){};a.endVariation.prototype.pgn=function(){return")"};a.startReserved=function(){};a.startReserved.prototype.pgn=function(){return"<"};a.endReserved=function(){};a.endReserved.prototype.pgn=function(){return">"};a.escape=function(a){this.text=a};a.escape.prototype.pgn=function(){return"%"+this.text+"\n"};a.escape.isIgnore=!0;a.text=function(a){this.text=a};a.text.prototype.pgn=function(){return this.text};a.text.prototype.toString=function(){return this.text};
a.text.prototype.isTagKey=!0;a.qtext=function(a){this.text=a};a.qtext.prototype.pgn=function(){return'"'+this.text+'"'};a.qtext.prototype.toString=function(){return this.text};a.qtext.prototype.isTagValue=!0;a.whitespace=function(a){this.text=a};a.whitespace.prototype.toString=function(){return this.text};a.whitespace.isIgnore=!0;a.Parser.prototype.token=function(c){if(this.s<this.i)return c=this.text.substring(this.s,this.i),this.s=this.i,new a.text(c);this.i++;this.s=this.i;return c};a.Parser.prototype.string=
function(){if(this.s<this.i){var c=this.text.substring(this.s,this.i);this.s=this.i;return new a.text(c)}for(var c="",b=!1;this.i<this.l;){var d=this.text.charAt(++this.i);if(b)c+=d,b=!1;else if("\\"==d)b=!0;else{if('"'==d)break;c+=d}}this.s=++this.i;return new a.qtext(c)};a.Parser.prototype.whitespace=function(){if(this.s<this.i){var c=this.text.substring(this.s,this.i);this.s=this.i;return new a.text(c)}for(c=this.text.charAt(this.i++);this.i<this.l;){var b=this.text.charAt(this.i);if(!/[ \r\t]/.test(b))break;
c+=b}this.s=this.i;return new a.whitespace(c)};a.Parser.prototype.escape=function(){if(this.s<this.i){var c=this.text.substring(this.s,this.i);this.s=this.i;return new a.text(c)}for(c="";this.i<this.l;){var b=this.text.charAt(++this.i);if("\n"==b)break;c+=b}this.s=++this.i;return new a.escape(c)};a.Parser.prototype.line=function(){if(this.s<this.i){var c=this.text.substring(this.s,this.i);this.s=this.i;return new a.text(c)}for(c="";this.i<this.l;){var b=this.text.charAt(++this.i);if("\n"==b)break;
c+=b}this.s=this.i;return new a.lineComment(c)};a.Parser.prototype.next=function(){for(;this.i<this.l;){var c=this.text.charAt(this.i);if(this.nl&&"%"==c)return this.escape();this.nl=!1;if('"'==c)return this.string();if(";"==c)return this.line();if(/[ \r\t]/.test(c))return this.whitespace();if("\n"==c)return this.nl=!0,this.token(new a.newLine);c={"%":a.escape,"{":a.startComment,"}":a.endComment,"[":a.startTag,"]":a.endTag,"(":a.startVariation,")":a.endVariation,"<":a.beginReserved,">":a.endReserved}[c];
if(void 0!==c)return this.token(new c);this.i++}return this.token()};a.Parser.prototype.begin=function(){for(var c=[],b=new a,d=this.next();void 0!==d;d=this.next())!(d instanceof a.whitespace)&&!(d instanceof a.newLine)&&(d instanceof a.startTag?this.tag(b):(b.setGame(this.movetext(channox.FEN.BEGIN)),c.push(b),b=new a));return c};a.Parser.prototype.tag=function(c){var b=this.next();if(!b.isTagKey)throw"Not a valid Tag Key: "+b;var d=this.consume(a.endTag,function(a){return a.isTagValue}).join("");
c.setTag(b,d);this.consume(a.newLine)};a.Parser.prototype.movetext=function(c,b){for(var d=new channox.Game(c),i=this.next();void 0!==i;i=this.next())if(i instanceof a.startComment)d.addComment(this.consume(a.endComment,function(){return!0}).join(""));else if(!(i instanceof a.lineComment)&&!(i instanceof a.escape)&&!(i instanceof a.whitespace)&&!(i instanceof a.newLine))if(i instanceof a.startVariation)this.movetext(c,!0);else{if(b&&i instanceof a.endVariation)return moves;if(i instanceof a.text){if(i=
i.toString(),!/^\d+\.*$/.test(i)){switch(i){case "1-0":case "0-1":case "1/2-1/2":d.setResult(i);case "*":return this.consume(a.newLine,function(){return!1}),d}i=channox.SAN.parse(c,i);c=d.addMove(i).getAfter()}}else throw"Unexpected token: "+i;}throw new "Unexpected end";};a.Parser.prototype.consume=function(c,b){for(var d=[],i=this.next();void 0!==i;i=this.next()){if(i instanceof c)return d;if(b&&b(i))d.push(i);else if(!(i instanceof a.whitespace))return}throw new "Unexpected end";};a.parse=function(c){return(new a.Parser(c)).begin(c)};
channox.PGN=a})();channox.ChessSet.register("default",{Q:new channox.Figure("AgBudQg9AAgqArQgqArAAA8QAAA9AqArQAqArA9AAQA8AAArgrQArgrAAg9QAAg8grgrQgrgrg8AA AnHtmQg9AAgrArQgrArAAA8QAAA9ArAqQArAqA9AAQA8AAArgqQArgqAAg9QAAg8grgrQgrgrg8AA AHEtmQg9AAgqArQgqArAAA8QAAA9AqAqQAqAqA9AAQA9AAArgqQArgqAAg9QAAg8grgrQgrgrg9AA AtUrwQg9AAgqArQgqArAAA8QAAA9AqAqQAqAqA9AAQA9AAArgqQArgqAAg9QAAg8grgrQgrgrg9AA ANUrwQg9AAgrArQgrArAAA8QAAA9ArAqQArAqA9AAQA8AAArgqQArgqAAg9QAAg8grgrQgrgrg8AA Aglp1Ih5KDIjhpVIhJAMIgGJSIkonzIg0AUIBbKgIBfClIAeCpIhEEDQAwAwC5AgQC5AgD1AAQDxAAC4gfQC4gfA0guIhGkGIAeirIBgilIBZqdIgygXIkpH0IgGpSIhKgMIjfJTIh5qB".split(" "),
"AgBp2Qg9AAgqgrQgqgrAAg9QAAg8AqgrQAqgrA9AAQA8AAArArQArArAAA8QAAA9grArQgrArg8AA AgBrBQBIAAAAhIQAAhHhIAAQhHAAAABHQAABIBHAA AIlF+QjQg0lRAAQlZAAjOA2IAQBnQDSgxFFAAQFDAADMAw AJAE9IBGh8QgzAUg2AAQiQAAhWh1QhAA2hQAAQhnAAg9hRQhFBLhgAAQhNAAhAg0QhaBziPAAQg3AAg2gUIBLCBQDRg8FuAAQF0AADMA9 ABbA7IhboQIhbIKQADgCALgIQAYgwAyAAQA3AAAQAwQAGAGAPAK AGHBQIAAn0IiyHqQAUgHAOgLQAVgbAkAAQArAAAZAlQADAEAEAEQAEAEAEAE AjYBAIixnlIAAHuQADgEAGgGQAVgtAxAAQApAAAZAiQAdAMAAAA AnqB9IjomRIA7FtQA9ArA6AAQAWAAAegH AHlCCQAYAHAeAAQBBAAA5gpIA7l2 AImKlIggh6QjTgukzAAQkvAAjWAuIghB7QDJg8FfAAQFWAADPA7 AKYMwQg0Aui4AfQi4AfjxAAQj1AAi5ggQi5gggwgwIBEkDIgeipIhfilIhbqgIA0gUIEoHzIAGpSIBJgMIDhJVIB5qDIBKAAIB5KBIDfpTIBKAMIAGJSIEpn0IAyAXIhZKdIhgClIgeCr AJBMJQjFhSl4AAQl/AAjEBUQC9BKGEAAQC5AACagUQCagUBTgj AnHpAQg9AAgrgqQgrgqAAg9QAAg8ArgrQArgrA9AAQA8AAArArQArArAAA8QAAA9grAqQgrAqg8AA AnHqLQBHAAAAhHQAAhHhHAAQhIAAAABHQAABHBIAA AHEqLQBIAAAAhHQAAhHhIAAQhHAAAABHQAABHBHAA AHEpAQg9AAgqgqQgqgqAAg9QAAg8AqgrQAqgrA9AAQA9AAArArQArArAAA8QAAA9grAqQgrAqg9AA AtUnJQg9AAgqgqQgqgqAAg9QAAg8AqgrQAqgrA9AAQA9AAArArQArArAAA8QAAA9grAqQgrAqg9AA AtUoUQBIAAAAhHQAAhIhIAAQhHAAAABIQAABHBHAA ANUoUQBHAAAAhHQAAhIhHAAQhIAAAABIQAABHBIAA ANUnJQg9AAgrgqQgrgqAAg9QAAg8ArgrQArgrA9AAQA8AAArArQArArAAA8QAAA9grAqQgrAqg8AA".split(" ")),
B:new channox.Figure(["AAAtPQg9AAgqArQgqArAAA8QAABZBQApQg/BJhAA3QhAA3hEAzQhSA9gdBOQgdBOgBBAQgBAkAIAuQAIAuAcAxQATAmAhAdQAhAdBUAwIhwEWQAtARA7APQA7APA5AGQgZAhgZARQgZARgLAGQgWAMhAAAQg7gIg6gIQg6gIg6gJQgXACgWAAQgHAAgHAAQgJAAgJAAQgTAAgUABQhHAGg+AdQgUAJgPAIQgPAIgTAVIBoCrQATgTAjgKQAjgKAWAAQAMAAAOgCQAHgBAIAAQAIAAAJABIEvAqQAWADAUAAQAoAAAigMQA0gSAmgbQAjgZAVgXQAVgXAPg9QAOA9AVAVQAVAVAjAdQAjAeA3ASQAkAMAoAAQAVAAAWgDIEugqQAJgBAIAAQAIAAAHABQAOACAOAAQAVAAAjAKQAjAKATATIBpirQgTgVgPgIQgPgIgTgJQhAgdhFgGQgUgBgUAAQgKAAgJAAQgHAAgHAAQgWAAgVgCQg7AJg6AIQg6AIg6AIQhAAAgWgMQgMgGgZgRQgZgRgYghQA3gGA7gPQA7gPAvgRIhwkWQBTgwAggdQAggdAVgmQAbgxAHguQAHguAAgkQgChAgdhOQgdhOhRg9QhGgzhAg3QhAg3g+hJQBQgqAAhYQAAg8grgrQgrgrg8AA"],
"AgmhKIhZgBQgkAAAAgkQAAgkAkAAIBZAAIAAhcQAAglAmAAQAlAAAAAlIAABcIBcAAQAjAAAAAkQAAAkgjAAIhcAAIAABYQAAAmglAAQgmAAAAgm AAAImQBJAABFgMQBFgMBAgRQh+ghiXAAQiZAAh8AhQA+ARBGAMQBGAMBKAA AAApzQBJAAAAhJQAAhJhJAAQhJAAAABJQAABJBJAA AAAGOQB+AAB0AYIgziEQhfgPhgAAQhiAAheAPIgzCEQBzgYCAAA AAADKQBoAABgAQQBpglAvhPQAphFAAhTQAAgxgYg8QgYg7g4gwQg/g0hLg/QhLg/hKhUQhLBUhLA/QhLA/g+A0Qg5AwgYA7QgYA8AAAxQAABTAoBFQAuBPBsAlQBfgQBpAA AgmJhIgiAAQg8Bhg3AYQgZAMgfAKQgfAKgpAAQgHAAhsgRQgzgHgegIQgegIgRgCQg9gHhSAOQgxAIgrAWIAzBUQAMgMAVgDQAVgDARgEQAtgHApAFQAOADApAEQApAEBEAKQBRALAdAAQBxAAA8grQAkgcAggyQAggyAAhH AAALbQgPA9gVAXQgVAXgjAZQgmAbg0ASQg0AShAgJIkvgqQgSgCgOACQgOACgMAAQgWAAgjAKQgjAKgTATIhoirQATgVAPgIQAPgIAUgJQA+gdBHgGQAegCAdABQAdABAfgDQA6AJA6AIQA6AIA7AIQBAAAAWgMQALgGAZgRQAZgRAZghQg5gGg7gPQg7gPgtgRIBwkWQhUgwghgdQghgdgTgmQgcgxgIguQgIguABgkQABhAAdhOQAdhOBSg9QBEgzBAg3QBAg3A/hJQhQgpAAhZQAAg8AqgrQAqgrA9AAQA8AAArArQArArAAA8QAABYhQAqQA+BJBAA3QBAA3BGAzQBRA9AdBOQAdBOACBAQAAAkgHAuQgHAugbAxQgVAmggAdQggAdhTAwIBwEWQgvARg7APQg7APg3AGQAYAhAZARQAZARAMAGQAWAMBAAAQA6gIA6gIQA6gIA7gJQAdADAdgBQAdgBAfACQBFAGBAAdQATAJAPAIQAPAIATAVIhpCrQgTgTgjgKQgjgKgVAAQgOAAgOgCQgOgCgSACIkuAqQhAAJg3gSQg3gSgjgeQgjgdgVgVQgVgVgOg9 AAlJhQAABHAgAyQAgAyAlAcQA7ArByAAQAcAABSgLQBDgKApgEQApgEAOgDQApgFAtAHQARAEAVADQAVADAOAMIAzhUQgsgWgxgIQhSgOg9AHQgSACgdAIQgdAIgyAHQhtARgGAAQgqAAgfgKQgfgKgYgMQg5gZg7hg".split(" ")),
N:new channox.Figure(["ApEt8QgKCnA5CdQgSASgLAOQgJALgGAHQgGAHgJAMQgMAQgEAIQgEAIgOAVQgUAfgGAhQgHAwAAAmQgIBZiDCrQhwCVAABaQAAA/AQA3QAQA3A3A3QAbAZA8AWQAFAAAFAAQAfAAAmgLQAfA6A4AAQACAAADAAQAmgCAUgUQAPgPAVgpQAphNAHgJQBmibDlhSQAvgUAoggIAAAAQAEA9gbBLQgbBLgwAxQhUBXhABCQhABCgRAiQglBEgQAvQgQAvgEAZQgGAgAAA0QAAA0AJAAIUxAAIAAjrQAAiQgLiqQgLiqgriaQgliEg/h2Qg/h2hHhUQhlh4iQhMQiQhMipgKQgyhjhWg8QhoBLgjB6QiRikjXhM"],["AlilEQAOAVgDAXQgKBFhBgKQgTgDgLgJQgEAFgIASQgLAighgKQghgMAHgjQAwh8B/guQAkgKALAgQAMAiggAMQgGADgFACQgFACgGAD",
"AqjC/QgfATgGAgQABAjgiADQglAEgBgkQAEhHA7gqQAcgWAXAbQAXAdgdAV","AA6qxQCpAKCQBMQCQBMBlB4QBHBUA/B2QA/B2AlCEQArCaALCqQALCqAACQIAADrQlQAAkMAAIrVAAQgJAAAAg0QAAg0AGggQAEgZAQgvQAQgvAlhEQARgiBAhCQBAhCBUhXQAwgxAbhLQAbhLgEg9QgoAggvAUQjlBShmCbQgHAJgpBNQgVApgPAPQgUAUgmACQg8ADghg9QgtAMgjgCQg8gWgbgZQg3g3gQg3QgQg3AAg/QAAhaBwiVQCDirAIhZQAAgmAHgwQAGghAUgfQAOgVAEgIQAEgIAMgQQAJgMAGgHQAGgHAJgLQALgOASgSQg5idAKinQDXBMCRCkQAjh6BohLQBWA8AyBj","AMWNQQgBAAADg6QADg6AAhEQABiHgBiQQgBiQgliPQgkiKgshhQgshhgzhHQhNh0iGhRQiGhRiRgYQAJA0gBAyQgCAmgiAAQgoAAAEgmQADiOhohlQhSBWgGByQgCAlgkgEQgigBAAgmIACgIQgsAOgwAZQgfAVgTggQgTggAkgSQAugXAXgLQhchfh2g6QAMCWBFCGQASAcgbAVQgeAXgUgfQgHgKgOgcQgWAWgHAKQgHAJgSAhQgSAhgIAVQgJAbABAQQABAQABAUQgJA/giA4QgiA4g0BRQgyBNgbAmQgbAmgOA8QgJAkAJA0QAJA0AgAdQAxAyAugEQAPAAAZgLQAZgLAOghQAcg9ASAAQAbAAACAeQAAAGgRAvQgJAVgQAXQgUAcACgEQARA9AognQALgLAPggQAPggAgg3QAlg/ArgoQArgnAhgYQATgOAcgSQAcgSAvgTQAlgPAtgWQAtgWAjgiQAxgwAbhHQAOgogDg6QgJgkAuAAQAiAAAEAjQAAB6hFBkQAWBFgKBSQgJBBgkBLQgkBLhuBbQjfC5ALDEQFwAACiAA"]),
R:new channox.Figure(["ApztNIAAGVIDwC4IAAIEIi4C3IAADdIilAAIAAECIXDAAIAAkCIilAAIAAjdIi3i3IAAoEIDvi4IAAmVIkoAAIAACUIi3AAIAAiUIkoAAIAACUIi4AAIAAiU"],"ACUq5IC3AAIAAiUIEoAAIAAGVIjvC4IAAIEIC3C3IAADdIClAAIAAECI3DAAIAAkCIClAAIAAjdIC4i3IAAoEIjwi4IAAmVIEnAAIAACUIC4AAIAAiUIEoAA AKZLkI0xAAIAABvIUxAA AHxIIIviAAIAACTIPiAA AE6j/IpzAAIAAIEIJzAA AIqoBIAAkCIiUAAIAACUIlMAAIAAiUIiRAAIAACUIlLAAIAAiUIiUAAIAAEC AHWG9IhvhuIrMAAIhxBu AFflIICJhvIvRAAICKBv".split(" ")),P:new channox.Figure(["AAAtMQhbAAhABAQhABAAABaQAABsBXBBQhuAMhLBTQhLBTAABxQAABaAwBHQAwBHBMAjQiyBEhxCeQhxCeAADHQAAB1ArBsISPAAQAqhtAAh0QAAjHhxieQhxieiyhEQBLgjAxhHQAxhHAAhaQAAhxhLhTQhLhThugMQBXhBAAhsQAAhahAhAQhAhAhaAA"],
["AAANTIISAAQAWhNAAhKQAAiohdiJQhdiJiThAQhHgFAAhIQAAg5BIgbQBkhGAAhzQAAhTg4g+Qg4g+hQgJQhAgFAAhEQAAgeAXgZQA6gtAAhJQAAg8grgrQgrgrg7AAQg9AAgqArQgqArAAA8QAABIA6AuQAXAXAAAgQAABEg/AFQhRAJg3A+Qg3A+AABTQAABzBkBGQBIAcAAA4QAABIhIAFQiTBAhcCJQhcCJAACoQAABQAWBI","AAAOdIpHAAQgrhsAAh1QAAjHBxieQBxieCyhEQhMgjgwhHQgwhHAAhaQAAhxBLhTQBLhTBugMQhXhBAAhsQAAhaBAhAQBAhABbAAQBaAABABAQBABAAABaQAABshXBBQBuAMBLBTQBLBTAABxQAABagxBHQgxBHhLAjQCyBEBxCeQBxCeAADHQAAB0gqBt"]),K:new channox.Figure(["AAAuWQgmAAAAAlIAABbIhZAAQgkAAAAAjIAAABQAAAjAkAAIBZAAIAACNIBMAAIABiMIBbgBQAjAAAAgjIAAgBQAAgjgjAAIhcAAIAAhbQAAglglAA",
"AAAo7QhUABg8A7Qg8A7AABUQAAAWAFAWQgMgIgRgIQgggMgggMQgggMgfgMQhggehHgEQgLAAgKAAQivAAhpB0QhvB7AKB8QAHCABBBaQAVAdAaAYQAaAYAvAoQAhAeAZAMQAZAMAFAHQACAEABAAIAjDKIhHEHQAwAxC+AgQC+AgD6AAQD2AAC8gfQC8gfA2gwIhHkLIAijLQAAgBABgBQABgBABgCQAEgHAYgMQAYgMAjgeQAtgmAbgZQAbgZAVgdQBBhaAIiAQAHh8hth7Qhoh0iuAAQgMAAgMAAQhKAEhcAfQhRAdgxAVQgOAGgPAJQAEgcAAgRQAAhTg7g8Qg7g8hUAA"],"AocHgQDNgzFTAAQFMAADMAxIAbieQjZg5lfAAQlhAAjWA6 ApeIhIgjjKQgBAAgCgEQgFgHgZgMQgZgMghgeQgvgogagYQgagYgVgdQhBhagHiAQgKh8Bvh7QBwh7C/AHQBHAEBgAeQAfAMAgAMQAgAMAgAMQARAIAMAIQgFgWAAgWQAAhUA8g7QA8g7BUgBQBUAAA7A8QA7A8AABTQAAARgEAcQAPgJAOgGQAxgVBRgdQBcgfBKgEQC/gIBvB8QBtB7gHB8QgICAhBBaQgVAdgbAZQgbAZgtAmQgjAegYAMQgYAMgEAHQgBACgBABQgBABAAABIgiDLIBHELQg2Awi8AfQi8Afj2AAQj6AAi+ggQi+gggwgx AIyKgIggh8QjWgvk7AAQk6AAjWAvIgiB9QDOg8FlAAQFjAADNA7 AJOMGQjQhUl5AAQmHAAjJBWQC+BLGOAAQC+AACcgVQCcgVBVgj AglC8QgBgqgCgpQgCgpgOgyQgsiQhZhYQgugthggmQhugrhiAAQiqAAhSB6QguBAAABhQAABpAzBEQAfAoAwAoQAwAoAqAgQC9hEGIgF AAAgMQAHgeAFgLQAKgqAOgdQAGgSAMgYQAMgYAOgfQAIgSAJgaQAJgaAJgZQAIgVAAgYQAAg0glglQglglg2AAQiAAAAACAQAAAYAIAVQAXBGAMAbQAOAfALAYQALAYAIASQAOAjAJAjQACAGAKAi AAkC8QC5ACCaATQCaAUBXAeQApggAwgnQAwgnAggpQAzhBAAhsQAAhhguhAQhTh5ipAAQhlAAhrAqQheAlgwAuQhaBagrCOQgPAygCApQgCApAAAr AAmo/IhMAAIAAiNIhZAAQgkAAAAgjIAAgBQAAgjAkAAIBZAAIAAhbQAAglAmAAQAlAAAAAlIAABbIBcAAQAjAAAAAjIAAABQAAAjgjAAIhbAB".split(" ")),
q:new channox.Figure("AgBudQg9AAgqArQgqArAAA8QAAA9AqArQAqArA9AAQA8AAArgrQArgrAAg9QAAg8grgrQgrgrg8AA AnHtmQg9AAgrArQgrArAAA8QAAA9ArAqQArAqA9AAQA8AAArgqQArgqAAg9QAAg8grgrQgrgrg8AA AHEtmQg9AAgqArQgqArAAA8QAAA9AqAqQAqAqA9AAQA9AAArgqQArgqAAg9QAAg8grgrQgrgrg9AA AtUrwQg9AAgqArQgqArAAA8QAAA9AqAqQAqAqA9AAQA9AAArgqQArgqAAg9QAAg8grgrQgrgrg9AA ANUrwQg9AAgrArQgrArAAA8QAAA9ArAqQArAqA9AAQA8AAArgqQArgqAAg9QAAg8grgrQgrgrg8AA Aglp1Ih5KDIjhpVIhJAMIgGJSIkonzIg0AUIBbKgIBfClIAeCpIhEEDQAwAwC5AgQC5AgD1AAQDxAAC4gfQC4gfA0guIhGkGIAeirIBgilIBZqdIgygXIkpH0IgGpSIhKgMIjfJTIh5qB".split(" "),
"AJgEIQhZggiigVQiigVjEAAQjAAAifATQigAUhbAgIA2BiQBagbCQgLQCQgLCrAAQCrAACRALQCRALBaAc ANUnJQg9AAgrgqQgrgqAAg9QAAg8ArgrQArgrA9AAQA8AAArArQArArAAA8QAAA9grAqQgrAqg8AA AtUnJQg9AAgqgqQgqgqAAg9QAAg8AqgrQAqgrA9AAQA9AAArArQArArAAA8QAAA9grAqQgrAqg9AA AHEpAQg9AAgqgqQgqgqAAg9QAAg8AqgrQAqgrA9AAQA9AAArArQArArAAA8QAAA9grAqQgrAqg9AA AnHpAQg9AAgrgqQgrgqAAg9QAAg8ArgrQArgrA9AAQA8AAArArQArArAAA8QAAA9grAqQgrAqg8AA AKYMwQg0Aui4AfQi4AfjxAAQj1AAi5ggQi5gggwgwIBEkDIgeipIhfilIhbqgIA0gUIEoHzIAGpSIBJgMIDhJVIB5qDIBKAAIB5KBIDfpTIBKAMIAGJSIEpn0IAyAXIhZKdIhgClIgeCr AIxMNIggh/QjSgwk+AAQk7AAjTAwIgiCAQDNg+FlAAQCrAACTARQCTARBfAb AIUHKQjGg3lKAAQlMAAjLA4IAQBtQDMg0E7AAQE6AADFAz AgBp2Qg9AAgqgrQgqgrAAg9QAAg8AqgrQAqgrA9AAQA8AAArArQArArAAA8QAAA9grArQgrArg8AA".split(" ")),
b:new channox.Figure(["AAAtPQg9AAgqArQgqArAAA8QAABZBQApQg/BJhAA3QhAA3hEAzQhSA9gdBOQgdBOgBBAQgBAkAIAuQAIAuAcAxQATAmAhAdQAhAdBUAwIhwEWQAtARA7APQA7APA5AGQgZAhgZARQgZARgLAGQgWAMhAAAQg7gIg6gIQg6gIg6gJQgXACgWAAQgHAAgHAAQgJAAgJAAQgTAAgUABQhHAGg+AdQgUAJgPAIQgPAIgTAVIBoCrQATgTAjgKQAjgKAWAAQAMAAAOgCQAHgBAIAAQAIAAAJABIEvAqQAWADAUAAQAoAAAigMQA0gSAmgbQAjgZAVgXQAVgXAPg9QAOA9AVAVQAVAVAjAdQAjAeA3ASQAkAMAoAAQAVAAAWgDIEugqQAJgBAIAAQAIAAAHABQAOACAOAAQAVAAAjAKQAjAKATATIBpirQgTgVgPgIQgPgIgTgJQhAgdhFgGQgUgBgUAAQgKAAgJAAQgHAAgHAAQgWAAgVgCQg7AJg6AIQg6AIg6AIQhAAAgWgMQgMgGgZgRQgZgRgYghQA3gGA7gPQA7gPAvgRIhwkWQBTgwAggdQAggdAVgmQAbgxAHguQAHguAAgkQgChAgdhOQgdhOhRg9QhGgzhAg3QhAg3g+hJQBQgqAAhYQAAg8grgrQgrgrg8AA"],
"AEfIOIgthuQhugXiDAAQiCAAhtAXIgtBtQCGghCXAAQCVAACKAi ADEEvIgfhLIAAgdQhSgLhTAAQhRAAhTALIgBAdIgdBLQBbgQBmAAQBnAABcAQ ACeLIQgrgggrhGIgiAAQAAA0AYAx Ag/LIQAYg0AAgxIgiAAQgqBFgtAh AAALbQgPA9gVAXQgVAXgjAZQgmAbg0ASQg0AShAgJIkvgqQgSgCgOACQgOACgMAAQgWAAgjAKQgjAKgTATIhoirQATgVAPgIQAPgIAUgJQA+gdBHgGQAegCAdABQAdABAfgDQA6AJA6AIQA6AIA7AIQBAAAAWgMQALgGAZgRQAZgRAZghQg5gGg7gPQg7gPgtgRIBwkWQhUgwghgdQghgdgTgmQgcgxgIguQgIguABgkQABhAAdhOQAdhOBSg9QBEgzBAg3QBAg3A/hJQhQgpAAhZQAAg8AqgrQAqgrA9AAQA8AAArArQArArAAA8QAABYhQAqQA+BJBAA3QBAA3BGAzQBRA9AdBOQAdBOACBAQAAAkgHAuQgHAugbAxQgVAmggAdQggAdhTAwIBwEWQgvARg7APQg7APg3AGQAYAhAZARQAZARAMAGQAWAMBAAAQA6gIA6gIQA6gIA7gJQAdADAdgBQAdgBAfACQBFAGBAAdQATAJAPAIQAPAIATAVIhpCrQgTgTgjgKQgjgKgVAAQgOAAgOgCQgOgCgSACIkuAqQhAAJg3gSQg3gSgjgeQgjgdgVgVQgVgVgOg9 AgohIIAABbQAAAoAoAAQAoAAAAgoIAAhcIBhAAQAlAAAAgmQAAgmglAAIhhAAIAAhhQAAgngoAAQgoAAAAAnIAABhIhfAAQglAAAAAmQAAAmAlAA".split(" ")),
n:new channox.Figure(["ApEt8QgKCnA5CdQgSASgLAOQgJALgGAHQgGAHgJAMQgMAQgEAIQgEAIgOAVQgUAfgGAhQgHAwAAAmQgIBZiDCrQhwCVAABaQAAA/AQA3QAQA3A3A3QAbAZA8AWQAFAAAFAAQAfAAAmgLQAfA6A4AAQACAAADAAQAmgCAUgUQAPgPAVgpQAphNAHgJQBmibDlhSQAvgUAoggIAAAAQAEA9gbBLQgbBLgwAxQhUBXhABCQhABCgRAiQglBEgQAvQgQAvgEAZQgGAgAAA0QAAA0AJAAIUxAAIAAjrQAAiQgLiqQgLiqgriaQgliEg/h2Qg/h2hHhUQhlh4iQhMQiQhMipgKQgyhjhWg8QhoBLgjB6QiRikjXhM"],"ApCGWQAEgJAJgTQASgtAAgIQgCgegdAAQgVAAgdA9QgEAIgIAGQgdAeAlAUQAiAUATgi AA7AFQBLhjgBh6QgEgjgkAAQgxAAAKAkQADA7gPAmQgYA9geAeQgQAgAjAPQAiAQASgh AjeoKQgFgmAHgtQhAAMg5AvQgiASASAgQASAhAggWQAWgLASgKQASgKAYgF AMWNQQgBAAADg6QADg6AAhEQABiHgBiQQgBiQgliPQgkiKgshhQgshhgzhHQhNh0iGhRQiGhRiRgYQAEAYgBAZQgBAZACAXQBoAjBcA0QBcA0ArA9QAzBHAsBhQAsBhAkCKQAkCPABCQQABCQAACHQAABEgDA6QgDA6ADAA AA6qxQCpAKCQBMQCQBMBlB4QBHBUA/B2QA/B2AlCEQArCaALCqQALCqAACQIAADrQlQAAkMAAIrVAAQgJAAAAg0QAAg0AGggQAEgZAQgvQAQgvAlhEQARgiBAhCQBAhCBUhXQAwgxAbhLQAbhLgEg9QgoAggvAUQjlBShmCbQgHAJgpBNQgVApgPAPQgUAUgmACQg8ADghg9QgtAMgjgCQg8gWgbgZQg3g3gQg3QgQg3AAg/QAAhaBwiVQCDirAIhZQAAgmAHgwQAGghAUgfQAOgVAEgIQAEgIAMgQQAJgMAGgHQAGgHAJgLQALgOASgSQg5idAKinQDXBMCRCkQAjh6BohLQBWA8AyBj AqfDWQAfgVgYgeQgZgYgfAUQhBArgEBGQABAjApgCQAmgDgBgkQAIgiAggQ AmOlEQAXgLAQgGQAQgGgLgiQgMgggkAKQh/AugwB8QgHAjAhAMQAhAKALgiQAIgSAEgFQALAJATADQBBAKAKhFQADgXgOgV".split(" ")),
r:new channox.Figure(["ApztNIAAGVIDwC4IAAIEIi4C3IAADdIilAAIAAECIXDAAIAAkCIilAAIAAjdIi3i3IAAoEIDvi4IAAmVIkoAAIAACUIi3AAIAAiUIkoAAIAACUIi4AAIAAiU"],"ACUq5IC3AAIAAiUIEoAAIAAGVIjvC4IAAIEIC3C3IAADdIClAAIAAECI3DAAIAAkCIClAAIAAjdIC4i3IAAoEIjwi4IAAmVIEnAAIAACUIC4AAIAAiUIEoAA AnwKJIAABuIPiAAIAAhu AAAoSIopAAIAAAxIBOA7IO2AAIBMg7IAAgx AAAlcIl6AAIBAAyIAAA9IJzAAIAAg9IBAgy AAADyIk5AAIAAAxIhAA+IL0AAIhAg+IAAgx AAAGsIm/AAIgxAuIAAA+IPiAAIAAg+Igxgu".split(" ")),p:new channox.Figure(["AAAtMQhbAAhABAQhABAAABaQAABsBXBBQhuAMhLBTQhLBTAABxQAABaAwBHQAwBHBMAjQiyBEhxCeQhxCeAADHQAAB1ArBsISPAAQAqhtAAh0QAAjHhxieQhxieiyhEQBLgjAxhHQAxhHAAhaQAAhxhLhTQhLhThugMQBXhBAAhsQAAhahAhAQhAhAhaAA"],
["AAAOdIpHAAQgrhsAAh1QAAjHBxieQBxieCyhEQhMgjgwhHQgwhHAAhaQAAhxBLhTQBLhTBugMQhXhBAAhsQAAhaBAhAQBAhABbAAQBaAABABAQBABAAABaQAABshXBBQBuAMBLBTQBLBTAABxQAABagxBHQgxBHhLAjQCyBEBxCeQBxCeAADHQAAB0gqBt"]),k:new channox.Figure(["AAAuWQgmAAAAAlIAABbIhZAAQgkAAAAAjIAAABQAAAjAkAAIBZAAIAACNIBMAAIABiMIBbgBQAjAAAAgjIAAgBQAAgjgjAAIhcAAIAAhbQAAglglAA","AAAo7QhUABg8A7Qg8A7AABUQAAAWAFAWQgMgIgRgIQgggMgggMQgggMgfgMQhggehHgEQgLAAgKAAQivAAhpB0QhvB7AKB8QAHCABBBaQAVAdAaAYQAaAYAvAoQAhAeAZAMQAZAMAFAHQACAEABAAIAjDKIhHEHQAwAxC+AgQC+AgD6AAQD2AAC8gfQC8gfA2gwIhHkLIAijLQAAgBABgBQABgBABgCQAEgHAYgMQAYgMAjgeQAtgmAbgZQAbgZAVgdQBBhaAIiAQAHh8hth7Qhoh0iuAAQgMAAgMAAQhKAEhcAfQhRAdgxAVQgOAGgPAJQAEgcAAgRQAAhTg7g8Qg7g8hUAA"],
"AB2CvQAAgfAHg5QAHg5APggQAohXBKhKQAVgVBHgkQBGgiBQAAQA8AAA7AVQA8AVAeArQAbAkAABSQAABAg0A4QgiAjgoAkQgoAkgkAwQg+gVhvgLQhvgLiGgC AAnEDQC5ADB2APQB2APBfAUQA7g6BIg0QBIg0AdglQAzhGAAhoQAAhgguhAQhTh6iqAAQhjAAhsArQhiAmgsAtQhbBYgqCQQgQAxgBBMQgBBMAAAq AIWG+QjGg3lKAAQlMAAjLA4IAQBtQDMg0E7AAQE6AADFAz AIyMBIggh/QjSgwk+AAQk7AAjTAwIgiCAQDNg+FlAAQCrAACTARQCTARBfAb ApeIhIgjjKQgBAAgCgEQgFgHgZgMQgZgMghgeQgvgogagYQgagYgVgdQhBhagHiAQgKh8Bvh7QBwh7C/AHQBHAEBgAeQAfAMAgAMQAgAMAgAMQARAIAMAIQgFgWAAgWQAAhUA8g7QA8g7BUgBQBUAAA7A8QA7A8AABTQAAARgEAcQAPgJAOgGQAxgVBRgdQBcgfBKgEQC/gIBvB8QBtB7gHB8QgICAhBBaQgVAdgbAZQgbAZgtAmQgjAegYAMQgYAMgEAHQgBACgBABQgBABAAABIgiDLIBHELQg2Awi8AfQi8Afj2AAQj6AAi+ggQi+gggwgx AgmECQAAgrgChMQgChMgOgyQgsiQhZhYQgugthggmQhugrhiAAQiqAAhSB6QguBAAABhQAABpAzBEQAbAmBMA5QBMA5A0AwQBegUB2gPQB2gPC7gC AAAgMQAHgeAFgLQAKgqAOgdQAGgSAMgYQAMgYAOgfQAIgSAJgaQAJgaAJgZQAIgVAAgYQAAg0glglQglglg2AAQiAAAAACAQAAAYAIAVQAXBGAMAbQAOAfALAYQALAYAIASQAOAjAJAjQACAGAKAi AAmo/IhMAAIAAiNIhZAAQgkAAAAgjIAAgBQAAgjAkAAIBZAAIAAhbQAAglAmAAQAlAAAAAlIAABbIBcAAQAjAAAAAjIAAABQAAAjgjAAIhbAB Ah4CvQiHAChvALQhvALg9AVQgggogqgoQgqgogggjQg2g3AAhBQAAhRAbglQAdgrA8gVQA8gVA9AAQBNAABHAiQBGAkAWAVQBJBKApBXQAOAgAHA5QAHA5ABAf AAAjFQgCgKgDgHQgGgVgEgJQgDgHgFgLQgFgLgFgMQgDgHgEgMQgEgMgDgKQgDgJAAgKQAAg5A3AAQA5AAAAA4QAAAOgEAGQgPApgBADQgQAggEAJQgHARgCAOQgDAGgBAEQgBAEgBAD".split(" "))});$(document).ready(function(){function a(){downsquare=downtime=void 0;downpiece&&(downpiece=null,board.setCursor(null));moves=null;board.clearHighlights()}moves=current=editpiece=void 0;turn=1;editOpen=editing=!1;undolog=[];ply=new channox.Ply(channox.FEN.BEGIN);board=new channox.Board($("#board"));pieces=new channox.Pieces($("#pieces"));downpiece=downtime=downsquare=void 0;$(window).resize(function(){layout()});layout();pieces.onClick(function(a,b){pieces.isHighlight(a)?(pieces.clearHighlight(a),
editpiece=void 0):(pieces.clearHighlights(),pieces.setHighlight(a),editpiece=channox.Piece[b])});board.onSwap(function(){switch(turn++){case 2:turn=0;break;case 0:board.update();return}var a=new channox.FEN(board.getFEN());a.setWhiteToPlay(!a.isWhiteToPlay());board.setFEN(a)});board.getTurnColor=function(a){return turn?a?"#fff":"#000":"#888"};board.onClick(function(c,b){console.log("Received "+b+" ("+c+")");if("down"==c&&void 0!==b){if(void 0===downsquare&&(downsquare=b,downtime=(new Date).getTime()),
void 0===editpiece){var d=null,i=$("#legal").attr("checked");if(null!=moves){for(var f=moves.length,e=0,h=0;h<f;h++){var g=moves[h];if(g.getFrom()==b||g.getTarget()==b)e++,d=g}1!=e&&(d=void 0)}if(d)moves=null,d.isPromotion()?board.promotion(d,function(a){a&&update(a)}):update(d);else{moves=[];var j=board.getFEN(),k=[];current=j.getPiece(b);channox.Move.moves(j,function(a){if(!turn||a.isTurn(j))if(!i||a.isLegal(j))a.getTarget()==b?(k.push(a.getFrom()),moves.push(a)):a.getFrom()==b&&(k.push(a.getTarget()),
moves.push(a))});board.setHighlights(k)}}}else"move"==c&&void 0!==downsquare?(d=(new Date).getTime(),void 0!==downtime&&300<d-downtime&&(d=new channox.FEN(board.getFEN()),downpiece=d.getPiece(downsquare),void 0!==downpiece&&(d.setPiece(downsquare,null),board.setFEN(d),board.setCursor(downpiece.getFEN())),downsquare=downtime=void 0)):"up"==c?void 0!==b?(void 0!==editpiece&&(d=new channox.FEN(board.getFEN()),d.getPiece(b)==editpiece?d.setPiece(b,null):d.setPiece(b,editpiece),board.setFEN(d)),downpiece&&
(d=new channox.FEN(board.getFEN()),d.setPiece(b,downpiece),board.setFEN(d),a()),downtime&&(downtime=downsquare=void 0)):a():"out"==c&&a()})});function edit(){$("#editbox").css("display",editing?"none":"inline-block");editing&&(undolog=[],ply=new channox.Ply(board.getFEN()),editpiece=void 0);editing=!editing;layout()}
function settings(){editOpen||$("#settingsbox").css("display","block");pieces.clearHighlights();current=void 0;$("#slider").animate({width:"toggle"},{duration:500,step:function(){layout()},complete:function(){layout();editOpen=$("#slider").is(":visible")}}).css("display","inline-block")}function set(a){board.setFEN(a)}function back(){var a=undolog.pop();a&&(board.setPly(a),ply=a)}function rewind(){var a=undolog[0];a?(board.setPly(a),undolog=[],ply=a):board.setPly(ply)}
function update(a){a=new channox.Ply(board.getFEN(),a);board.setPly(a);undolog.push(ply);ply=a}function layout(){document.body.style.fontSize=0.06*Math.min(window.innerWidth,window.innerHeight)+"px";board.layout();pieces.layout()}function flip(){board.setFlip(!board.getFlip())};